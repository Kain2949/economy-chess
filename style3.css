:root{
  --bg0:#050712;
  --bg1:#050a1c;
  --bg2:#040818;

  --glass: rgba(12, 20, 48, 0.48);
  --glass2: rgba(10, 16, 40, 0.62);

  --text: rgba(255,255,255,0.92);
  --muted: rgba(255,255,255,0.66);

  --accent:#8a6bff;
  --accent2:#5a4cff;

  --shadow: 0 22px 70px rgba(0,0,0,.58);
  --radius: 22px;

  --light: rgba(255,255,255,0.055);
  --dark:  rgba(255,255,255,0.028);
  --grid:  rgba(255,255,255,0.055);

  --dotG: rgba(70,255,220,0.95);
  --dotY: rgba(255,220,90,0.95);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }

body{
  margin:0;
  color:var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Helvetica Neue";
  overflow-x:hidden;
  background:
    radial-gradient(1200px 700px at 18% 12%, rgba(110, 80, 255, 0.12), transparent 60%),
    radial-gradient(1000px 700px at 82% 18%, rgba(60, 150, 255, 0.10), transparent 58%),
    radial-gradient(900px 700px at 55% 80%, rgba(90, 255, 220, 0.06), transparent 60%),
    linear-gradient(180deg, var(--bg0) 0%, var(--bg1) 35%, var(--bg2) 70%, var(--bg0) 100%);
}

body::before{
  content:"";
  position:fixed;
  inset:-20px;
  pointer-events:none;
  opacity:0.28;
  background-image:
    radial-gradient(circle, rgba(255,255,255,.85) 1px, transparent 2px),
    radial-gradient(circle, rgba(255,255,255,.45) 1px, transparent 2px);
  background-size: 160px 160px, 260px 260px;
  background-position: 0 0, 70px 110px;
  filter: drop-shadow(0 0 10px rgba(120,110,255,0.12));
}

body::after{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  background: radial-gradient(1200px 700px at 50% 0%, rgba(0,0,0,0.00), rgba(0,0,0,0.55));
  opacity:0.55;
}

#app{
  width:min(520px, 94vw);
  margin:0 auto;
  padding: 14px 12px 18px;
}

/* TOP BAR */
.topbar{ display:flex; gap:10px; margin-bottom:10px; }

.timer{
  flex:1;
  border:none;
  border-radius: 18px;
  padding: 10px 10px;
  text-align:center;
  background: linear-gradient(180deg, rgba(18,28,62,0.55), rgba(10,16,40,0.48));
  backdrop-filter: blur(12px);
  box-shadow: 0 18px 55px rgba(0,0,0,0.45), inset 0 0 0 1px rgba(255,255,255,0.045);
}
.timer .label{ font-size: 11px; color: rgba(255,255,255,0.62); letter-spacing: .2px; }
.timer .time{ margin-top:2px; font-size:20px; font-weight:900; letter-spacing:.6px; text-shadow:0 12px 40px rgba(0,0,0,.55); }

/* INFO */
.info{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-bottom:10px; color: rgba(255,255,255,0.86); }
.info .me{ color: rgba(255,255,255,0.70); }
.info .status{ margin-left:auto; color: rgba(255,255,255,0.70); }

/* BOARD */
.board{
  position:relative;
  display:grid;
  grid-template-columns: repeat(8, minmax(0, 1fr));
  grid-template-rows: repeat(8, minmax(0, 1fr));
  width:100%;
  aspect-ratio: 1 / 1;

  border:none;
  border-radius: 22px;
  overflow:hidden;

  background: linear-gradient(180deg, rgba(12,20,48,0.40), rgba(8,12,30,0.34));
  backdrop-filter: blur(14px);
  box-shadow: var(--shadow), inset 0 0 0 1px rgba(255,255,255,0.045);
}

.board::before{
  content:"";
  position:absolute;
  inset:-2px;
  pointer-events:none;
  background:
    radial-gradient(700px 260px at 50% 0%, rgba(255,255,255,0.12), transparent 60%),
    radial-gradient(600px 260px at 20% 20%, rgba(140,200,255,0.08), transparent 60%),
    radial-gradient(600px 260px at 80% 25%, rgba(140,110,255,0.08), transparent 60%);
  opacity:0.55;
}

.sq{
  position:relative;
  min-width:0;
  min-height:0;

  display:flex;
  align-items:center;
  justify-content:center;

  font-size:0;
  user-select:none;
  cursor:pointer;

  box-shadow: inset 0 0 0 1px var(--grid);
  transition: transform .12s ease;
}

.light{ background: var(--light); }
.dark { background: var(--dark);  }

.sq:hover{ transform: scale(1.01); }

.sq.sel{
  outline:none;
  z-index:2;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,0.06),
    inset 0 0 0 2px rgba(138,107,255,0.55),
    0 0 0 1px rgba(138,107,255,0.25);
}

/* DOTS instead of full-cell highlight */
.sq.g::after,
.sq.y::after{
  content:"";
  position:absolute;
  left:50%;
  top:50%;
  width:10px;
  height:10px;
  border-radius:999px;
  transform: translate(-50%,-50%);
  pointer-events:none;
}

.sq.haspc.g::after,
.sq.haspc.y::after{ top:72%; }

.sq.g::after{
  background: var(--dotG);
  box-shadow: 0 0 14px rgba(70,255,220,0.55), 0 0 30px rgba(70,255,220,0.22);
}

.sq.y::after{
  background: var(--dotY);
  box-shadow: 0 0 14px rgba(255,220,90,0.50), 0 0 30px rgba(255,220,90,0.20);
}

/* PIECES */
.pieceimg{
  width:78%;
  height:78%;
  display:block;
  object-fit:contain;
  pointer-events:none;
  filter: drop-shadow(0 12px 28px rgba(0,0,0,0.55));
}

/* outline */
.pcb .pieceimg{
  filter:
    drop-shadow(0 0 1px rgba(255,255,255,0.75))
    drop-shadow(0 0 6px rgba(255,255,255,0.10))
    drop-shadow(0 12px 28px rgba(0,0,0,0.55));
}
.pcw .pieceimg{
  filter:
    drop-shadow(0 0 6px rgba(240,245,255,0.65))
    drop-shadow(0 0 16px rgba(180,200,255,0.35))
    drop-shadow(0 12px 28px rgba(0,0,0,0.45));
}


/* BOTTOM */
.bottom{ display:flex; gap:10px; margin-top: 12px; align-items:center; }

.coins{
  min-width: 92px;
  border:none;
  border-radius: 18px;
  padding: 10px 12px;
  text-align:center;
  background: linear-gradient(180deg, rgba(18,28,62,0.55), rgba(10,16,40,0.48));
  backdrop-filter: blur(12px);
  box-shadow: 0 18px 55px rgba(0,0,0,0.45), inset 0 0 0 1px rgba(255,255,255,0.045);
}
.coins .label{ font-size:11px; color: rgba(255,255,255,0.62); }
.coins .value{ font-size: 26px; font-weight: 900; text-shadow: 0 12px 40px rgba(0,0,0,.55); }

.shop{ display:flex; gap:10px; flex:1; }

.shopbtn{
  flex:1;
  position:relative;
  border:none;
  border-radius: 18px;
  padding: 12px 0;
  color: rgba(255,255,255,0.92);
  background: rgba(10,16,40,0.44);
  backdrop-filter: blur(12px);
  font-size: 22px;
  cursor:pointer;
  box-shadow: 0 16px 50px rgba(0,0,0,0.42), inset 0 0 0 1px rgba(255,255,255,0.045);
  transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
}
.shopbtn:hover{ transform: translateY(-1px); filter: brightness(1.05); }

.shopbtn .cost{ position:absolute; top:7px; right:10px; font-size:12px; color: rgba(255,255,255,0.70); }

.shopbtn .qty{
  position:absolute;
  left:8px;
  bottom:8px;
  width:18px;
  height:18px;
  border-radius: 999px;
  background: rgba(255,255,255,0.10);
  color: rgba(255,255,255,0.78);
  font-size: 11px;
  display:flex;
  align-items:center;
  justify-content:center;
}

.shopbtn.dim{ opacity: 0.35; cursor: not-allowed; filter: saturate(0.4); }

.shopbtn.active{
  transform: scale(1.06);
  background: linear-gradient(135deg, rgba(138,107,255,0.42), rgba(90,76,255,0.22));
  box-shadow:
    0 22px 70px rgba(138,107,255,0.20),
    0 10px 30px rgba(0,0,0,0.35),
    inset 0 0 0 1px rgba(255,255,255,0.055);
}

@media (max-width: 420px){
  #app{ padding: 12px 10px 16px; }
  .timer .time{ font-size: 18px; }
  .shop{ gap:8px; }
  .shopbtn{ border-radius: 16px; }
  .coins, .timer{ border-radius: 16px; }
}

/* CAPTURE HIGHLIGHT â€” red aura instead of dots */
.sq.cap .pieceimg{
  filter:
    drop-shadow(0 0 6px rgba(255,80,120,0.9))
    drop-shadow(0 0 16px rgba(255,80,120,0.55))
    drop-shadow(0 0 32px rgba(255,80,120,0.35))
    drop-shadow(0 12px 28px rgba(0,0,0,0.45));
}
